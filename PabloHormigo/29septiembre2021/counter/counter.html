<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador</title>
</head>

<body>
    <h1>Contador</h1>
    <ul>
        <li>Al ir escribiendo los segundos, se debe actualizar el botón con "Contar x segundos"</li>
        <li>Si el input está vacío el botón debe decir solo "Contar"</li>
        <li>Al presionar la tecla "Enter" se debe accionar el botón "Contar"</li>
        <li>Al momento de contar debe quedar enfocado el input con todo el valor seleccionado para que no se tenga que
            borrar</li>
        <li>Cuando se haga clic en el botón se debe agregar un nuevo elemento a la lista con los "segundos/cantidad"
        </li>
        <li>Cada cambio de segundo sebe reflejarse en el elemento de la lista y en la consola de javascript</li>
        <li>Al hacer clic en el contador, se debe eliminar</li>
    </ul>
    <label>
        Segundos:
        <input type="number">
    </label>
    <button>Contar</button>
    <ul id="counters"></ul>
    <script>
        // put your code here
        const segundos = document.querySelector('input');
        const btnContar= document.querySelector('button');
        const list = document.querySelector('#counters');

        segundos.addEventListener('keyup',()=>{
            let seg = Number(segundos.value);
            if(seg===0){
                btnContar.textContent= 'Contar';
            }
            else{
                btnContar.textContent = `Contar ${seg} segundos`
            }
        });

        btnContar.addEventListener('click',addCounter);

        segundos.addEventListener('keydown',(e)=>{
            if(e.key === "Enter"){
                addCounter();
            }
        });

        function addCounter(){
            let seg = segundos.value;
            if(seg !== '' && seg > 0){
                let listItem = document.createElement('li');
                list.appendChild(listItem);
                countdown(listItem,seg);
                segundos.select();
            }
        }

        function countdown(listItem,tiempo){
            let tiempoRestante = tiempo;
            cuentaInterval();
            let contador = setInterval(cuentaInterval,1000);

            function cuentaInterval(){
                if(tiempoRestante === 0){
                    clearInterval(contador);
                    listItem.textContent = `${tiempoRestante} / ${tiempo}`;
                    console.log(tiempoRestante);
                    // list.removeChild(listItem);
                }
                else{
                    listItem.textContent = `${tiempoRestante} / ${tiempo}`;
                    console.log(tiempoRestante);
                    tiempoRestante--;
                }
            }

            listItem.addEventListener('click',()=>{
                list.removeChild(listItem);
                clearInterval(contador);
            });
        }

    </script>
</body>

</html>