<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador</title>
</head>

<body>
    <h1>Contador</h1>
    <ul>
        <li>Al ir escribiendo los segundos, se debe actualizar el botón con "Contar x segundos"</li>
        <li>Si el input está vacío el botón debe decir solo "Contar"</li>
        <li>Al presionar la tecla "Enter" se debe accionar el botón "Contar"</li>
        <li>Al momento de contar debe quedar enfocado el input con todo el valor seleccionado para que no se tenga que
            borrar</li>
        <li>Cuando se haga clic en el botón se debe agregar un nuevo elemento a la lista con los "segundos/cantidad"
        </li>
        <li>Cada cambio de segundo sebe reflejarse en el elemento de la lista y en la consola de javascript</li>
        <li>Al hacer clic en el contador, se debe eliminar</li>
    </ul>
    <label>
        Segundos:
        <input type="number">
    </label>
    <button>Contar</button>
    <ul id="counters"></ul>
    <script>
    // SELECTORES
        let inputText = document.querySelector("input");
        let button = document.querySelector("button");
        let counters = document.getElementById("counters");

    //FUNCIONES
        // aniade la cantidad a la lista
        function count(tiempo){
            let listItem = document.createElement("li");
            counters.appendChild(listItem);
            refresh(listItem,tiempo)
        }

        function refresh (listItem, tiempo){

            let tiempoRestante = tiempo;
            cuentaAtras();
            let counter = setInterval(cuentaAtras,1000);

            function cuentaAtras (){
                if(tiempoRestante === 0){
                    clearInterval(counter);
                    listItem.textContent = `${tiempoRestante}/${tiempo}`;
                }
                listItem.textContent = `${tiempoRestante}/${tiempo}`;
                console.log( `${tiempoRestante}/${tiempo}`)
                tiempoRestante--;
            }

            listItem.addEventListener('click',()=>{
                counters.removeChild(listItem);
                clearInterval(counter);
            });

        }
        // actualiza contenido del boton
        inputText.addEventListener("keyup", ()=>{
            let text = inputText.value;
            if(text !== "") {
                text = `Contar ${inputText.value} segundos`;
            }else{
                text = "Contar"
            }
            button.textContent = text;
            })

        //funcionalidad enter
        inputText.addEventListener("keyup", (e) =>{
            if (e.key === "Enter"){
                count(inputText.value);
                inputText.select();
            }

        })
        //funcionalidad button
        button.addEventListener("click", () =>{
            count(inputText.value);
        })


    </script>
</body>

</html>